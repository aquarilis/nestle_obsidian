<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_map">
    <sys_transform_map action="INSERT_OR_UPDATE">
        <active>true</active>
        <copy_empty_fields>true</copy_empty_fields>
        <create_new_record_on_empty_coalesce_fields>false</create_new_record_on_empty_coalesce_fields>
        <enforce_mandatory_fields>No</enforce_mandatory_fields>
        <name>(DXC) Obsidian - 20 - Technical Ticket TM</name>
        <order>100</order>
        <run_business_rules>false</run_business_rules>
        <run_script>true</run_script>
        <script><![CDATA[(function transformRow(source, target, map, log, isUpdate) {

	try {

		if (ignore == true) {
			return;
		}


		var obsidianCommonUtils = new x_nesa_ng_obsidian.DXCObsidianCommonUtils();


		if (target.supplier != "") {
			target.supplier_group = obsidianCommonUtils.getSupplierGroupSysIDForSupplier(target.supplier);
			if (target.supplier_group == "") {
				log.warn("there is no Obsidian supplier group defined for supplier '" + target.supplier.name + "'");
			}
		}

		if (target.requester_group != "") {
			target.requester_type = (function (requesterGroup_GR) {
				if (!requesterGroup_GR.isValidRecord()) {
					return "";
				}
				var requesterGroupTypes = requesterGroup_GR.getValue("type");
				if (requesterGroupTypes.indexOf(obsidianCommonUtils._getGroupTypeID("obsidian-org-np")) != -1) {
					return "market";
				} else {
					return "3rd_party";
				}
			})(target.requester_group.getRefRecord());
		}

		if (target.country != "") {
			target.market = target.u_country.parent;


			var impactedNestleCompany = obsidianCommonUtils.getObsidianNestleCompanyFromCountry(target.u_country);

			if (!impactedNestleCompany) {
				log.warn("there is no NestlÃ© company defined for country " + target.getDisplayValue("u_country"));
			} else {
				target.impacted_nestle_company = impactedNestleCompany;
			}
		}

		if (target.opened_by == "") {
			log.warn("user not found for opened_by reference: " + source.u_opened_by);
			target.opened_by = "";
			target.company = "";
		} else {
			target.company = target.opened_by.company;
		}





	} catch (e) {
		error = true;
		log.error("error in Technical ticket TM main script: " + e);
	}

})(source, target, map, log, action === "update");]]></script>
        <source_table>x_nesa_ng_obsidian_technical_ticket_import</source_table>
        <sys_class_name>sys_transform_map</sys_class_name>
        <sys_created_by>admin_Luu-Ly_Mai</sys_created_by>
        <sys_created_on>2022-08-09 12:11:52</sys_created_on>
        <sys_id>f819a3801b151d50fe9e43f1b24bcb9f</sys_id>
        <sys_mod_count>28</sys_mod_count>
        <sys_name>(DXC) Obsidian - 20 - Technical Ticket TM</sys_name>
        <sys_package display_value="NexGen Obsidian Management" source="x_nesa_ng_obsidian">20ae71f61b8dc11006e886efe54bcbc5</sys_package>
        <sys_policy/>
        <sys_scope display_value="NexGen Obsidian Management">20ae71f61b8dc11006e886efe54bcbc5</sys_scope>
        <sys_update_name>sys_transform_map_f819a3801b151d50fe9e43f1b24bcb9f</sys_update_name>
        <sys_updated_by>admin_luu-ly_mai</sys_updated_by>
        <sys_updated_on>2022-08-10 13:26:46</sys_updated_on>
        <target_table>x_nesa_ng_obsidian_technical_ticket</target_table>
    </sys_transform_map>
</record_update>
